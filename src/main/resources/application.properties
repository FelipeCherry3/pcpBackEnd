# =========================================
# SERVER CONFIG
# =========================================
# Railway define automaticamente a porta via variável PORT
server.port=${PORT:8080}
spring.application.name=pcpBackEnd

# Hikari (gerenciador de conexões, padrão no Spring Boot)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=10000

# Tomcat (configuração para desempenho)
server.tomcat.max-threads=50
server.tomcat.accept-count=50
server.tomcat.max-connections=200

# =========================================
#  DATABASE (PostgreSQL - Railway)
# =========================================
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Recomenda-se usar sslmode=require nos ambientes gerenciados
# (já está incluso na URL)

# =========================================
#  JPA / HIBERNATE
# =========================================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# =========================================
#  SPRING SECURITY (usuário padrão)
# =========================================
spring.security.user.name=${SPRING_SECURITY_USER}
spring.security.user.password=${SPRING_SECURITY_PASS}

# =========================================
# BLING API CONFIGURATION
# =========================================
bling.client-id=${BLING_CLIENT_ID}
bling.client-secret=${BLING_CLIENT_SECRET}
bling.redirect-uri=${BLING_REDIRECT_URI}
bling.auth-url=https://www.bling.com.br/Api/v3/oauth/authorize
bling.token-url=https://www.bling.com.br/Api/v3/oauth/token
bling.api-url=https://www.bling.com.br/Api/v3

# =========================================
#  PERFIL ATIVO (dev / prod)
# =========================================
spring.profiles.active=${SPRING_PROFILES_ACTIVE:prod}
